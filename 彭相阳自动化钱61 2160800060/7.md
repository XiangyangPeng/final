# 直线检测
---
   自动化钱61 彭相阳 2160800060
# 1. 对测试图像进行边缘检测
<br>  在测试图像（test1~test6）进行边缘检测，采用sobel, laplacian,canny三种方法</br>
## 1.1 test1
<br>  使用sobel算子检测边缘，得到灰度图如左下图，然后进行阈值处理得到右下图：</br>

<div align="center">
  <img src="pictures/1/1_sobel.bmp?raw=True" width="25%" height="25%"/><img src="pictures/1/1_thr_sobel_30.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> sobel算子得到的灰度图和阈值处理后得到的二值图</div>

<br>  使用laplace算子检测边缘，得到灰度图如左下图，然后进行阈值处理得到右下图：</br>

<div align="center">
  <img src="pictures/1/1_lap.bmp?raw=True" width="25%" height="25%"/><img src="pictures/1/1_thr_lap_10.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> laplace算子得到的灰度图和阈值处理后得到的二值图</div>

<br>  使用canny法检测边缘，得到下图：</br>

<div align="center">
  <img src="pictures/1/1_canny_30.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> canny法得到的边缘图</div>
## 1.2 test2
<br>  使用sobel算子检测边缘，得到灰度图如左下图，然后进行阈值处理得到右下图：</br>

<div align="center">
  <img src="pictures/2/2_sobel.bmp?raw=True" width="25%" height="25%"/><img src="pictures/2/2_thr_sobel_30.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> sobel算子得到的灰度图和阈值处理后得到的二值图</div>

<br>  使用laplace算子检测边缘，得到灰度图如左下图，然后进行阈值处理得到右下图：</br>

<div align="center">
  <img src="pictures/2/2_lap.bmp?raw=True" width="25%" height="25%"/><img src="pictures/2/2_thr_lap_10.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> laplace算子得到的灰度图和阈值处理后得到的二值图</div>

<br>  使用canny法检测边缘，得到下图：</br>

<div align="center">
  <img src="pictures/2/2_canny_30.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> canny法得到的边缘图</div>
## 1.3 test3
<br>  使用sobel算子检测边缘，得到灰度图如左下图，然后进行阈值处理得到右下图：</br>

<div align="center">
  <img src="pictures/3/3_sobel.bmp?raw=True" width="25%" height="25%"/><img src="pictures/3/3_thr_sobel_30.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> sobel算子得到的灰度图和阈值处理后得到的二值图</div>

<br>  使用laplace算子检测边缘，得到灰度图如左下图，然后进行阈值处理得到右下图：</br>

<div align="center">
  <img src="pictures/3/3_lap.bmp?raw=True" width="25%" height="25%"/><img src="pictures/3/3_thr_lap_10.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> laplace算子得到的灰度图和阈值处理后得到的二值图</div>

<br>  使用canny法检测边缘，得到下图：</br>

<div align="center">
  <img src="pictures/3/3_canny_30.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> canny法得到的边缘图</div>
## 1.4 test4
<br>  使用sobel算子检测边缘，得到灰度图如左下图，然后进行阈值处理得到右下图：</br>

<div align="center">
  <img src="pictures/4/4_sobel.bmp?raw=True" width="25%" height="25%"/><img src="pictures/4/4_thr_sobel_30.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> sobel算子得到的灰度图和阈值处理后得到的二值图</div>

<br>  使用laplace算子检测边缘，得到灰度图如左下图，然后进行阈值处理得到右下图：</br>

<div align="center">
  <img src="pictures/4/4_lap.bmp?raw=True" width="25%" height="25%"/><img src="pictures/4/4_thr_lap_5.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> laplace算子得到的灰度图和阈值处理后得到的二值图</div>

<br>  使用canny法检测边缘，得到下图：</br>

<div align="center">
  <img src="pictures/4/4_canny_30.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> canny法得到的边缘图</div>

## 1.5 test5
<br>  使用sobel算子检测边缘，得到灰度图如左下图，然后进行阈值处理得到右下图：</br>

<div align="center">
  <img src="pictures/5/5_sobel.bmp?raw=True" width="25%" height="25%"/><img src="pictures/5/5_thr_sobel_30.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> sobel算子得到的灰度图和阈值处理后得到的二值图</div>

<br>  使用laplace算子检测边缘，得到灰度图如左下图，然后进行阈值处理得到右下图：</br>

<div align="center">
  <img src="pictures/5/5_lap.bmp?raw=True" width="25%" height="25%"/><img src="pictures/5/5_thr_lap_10.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> laplace算子得到的灰度图和阈值处理后得到的二值图</div>

<br>  使用canny法检测边缘，得到下图：</br>

<div align="center">
  <img src="pictures/5/5_canny_30.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> canny法得到的边缘图</div>
## 1.6 test6
<br>  使用sobel算子检测边缘，得到灰度图如左下图，然后进行阈值处理得到右下图：</br>

<div align="center">
  <img src="pictures/6/6_sobel.bmp?raw=True" width="25%" height="25%"/><img src="pictures/6/6_thr_sobel_30.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> sobel算子得到的灰度图和阈值处理后得到的二值图</div>

<br>  使用laplace算子检测边缘，得到灰度图如左下图，然后进行阈值处理得到右下图：</br>

<div align="center">
  <img src="pictures/6/6_lap.bmp?raw=True" width="25%" height="25%"/><img src="pictures/6/6_thr_lap_10.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> laplace算子得到的灰度图和阈值处理后得到的二值图</div>

<br>  使用canny法检测边缘，得到下图：</br>

<div align="center">
  <img src="pictures/6/6_canny_30.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> canny法得到的边缘图</div>
# 2. Hough变换检测直线
<br>  利用Hough变换进行全局处理，检测直线</br>
## 1.1 test1（Threshold=100）
<br>  经sobel得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/1/1_Hsobel_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>
<br>  经laplace得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/1/1_Hlap_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>

<br>  经canny得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/1/1_Hcanny_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>
## 1.2 test2（Threshold=100）
<br>  经sobel得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/2/2_Hsobel_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>
<br>  经laplace得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/2/2_Hlap_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>

<br>  经canny得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/2/2_Hcanny_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>
## 1.3 test3（Threshold=100）
<br>  经sobel得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/3/3_Hsobel_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>
<br>  经laplace得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/3/3_Hlap_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>

<br>  经canny得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/3/3_Hcanny_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>
## 1.4 test4（Threshold=100）
<br>  经sobel得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/4/4_Hsobel_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>
<br>  经laplace得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/4/4_Hlap_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>

<br>  经canny得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/4/4_Hcanny_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>
## 1.5 test5（Threshold=300）
<br>  经sobel得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/5/5_Hsobel_300.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>
<br>  经laplace得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/5/5_Hlap_300.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>

<br>  经canny得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/5/5_Hcanny_300.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>
## 1.6 test6（Threshold=300）
<br>  经sobel得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/6/6_Hsobel_300.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>
<br>  经laplace得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/6/6_Hlap_300.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>

<br>  经canny得到的边缘图经过Hough变换后得到下图：</br>

<div align="center">
  <img src="pictures/6/6_Hcanny_300.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center"> 经Hough变换检测出的直线在图中用灰色线标出</div>
# 3. 比较
## 3.1 不同边缘检测算法的影响
<br>  以test3(Threshold=100)为例：</br>

<div align="center">
  <img src="pictures/3/3_Hsobel_100.bmp?raw=True" width="25%" height="25%"/><img src="pictures/3/3_Hlap_100.bmp?raw=True" width="25%" height="25%"/><img src="pictures/3/3_Hcanny_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center">  从左到右依次为基于sobel, laplace, canny边缘检测算法 得到的最终图</div>
<br>可以看出检测出的直线的条数从左到右依次减少，其原因是sobel算子得到的边缘较粗，canny法得到的边缘较细，laplace法得到的边缘处于两者之间，此外，canny法还大大减少了伪边缘的存在，这就使得检测出的直线数呈现除这样的变化规律</br>
<br>  再以test1(Threshold=100)为例，可以发现上述论断依然成立，考察剩余的4张图像，亦均是如此。</br>

<div align="center">
  <img src="pictures/1/1_Hsobel_100.bmp?raw=True" width="25%" height="25%"/><img src="pictures/1/1_Hlap_100.bmp?raw=True" width="25%" height="25%"/><img src="pictures/1/1_Hcanny_100.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center">  从左到右依次为基于sobel, laplace, canny边缘检测算法 得到的最终图</div>
## 3.2 不同Hough变换参数的影响
<br>  以test3为例：</br>

<div align="center">
  <img src="pictures/3/3_Hsobel_100.bmp?raw=True" width="25%" height="25%"/><img src="pictures/3/3_Hsobel_200.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center">  sobel算子，左图Threshold=100, 右图Threshold=200</div>
<div align="center">
  <img src="pictures/3/3_Hlap_100.bmp?raw=True" width="25%" height="25%"/><img src="pictures/3/3_Hlap_200.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center">  laplace算子，左图Threshold=100, 右图Threshold=200</div>
<div align="center">
  <img src="pictures/3/3_Hcanny_100.bmp?raw=True" width="25%" height="25%"/><img src="pictures/3/3_Hcanny_200.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center">  canny法，左图Threshold=100, 右图Threshold=200</div>
<br>可以看出无论边缘检测方法是什么，检测出的直线的条数随着阈值的增大而减少（所谓阈值，即 Only those lines are returned that get enough votes ( >𝚝𝚑𝚛𝚎𝚜𝚑𝚘𝚕𝚍 ) ），直观解释就是直线的长度，当阈值提高时，易知其数量自然会减少</br>
<br>  再以test5为例，可以发现上述论断依然成立，考察剩余的4张图像，亦均是如此。</br>

<div align="center">
  <img src="pictures/5/5_Hsobel_200.bmp?raw=True" width="25%" height="25%"/><img src="pictures/5/5_Hsobel_300.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center">  sobel算子，左图Threshold=200, 右图Threshold=300</div>
<div align="center">
  <img src="pictures/5/5_Hlap_200.bmp?raw=True" width="25%" height="25%"/><img src="pictures/5/5_Hlap_300.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center">  laplace算子，左图Threshold=200, 右图Threshold=300</div>
<div align="center">
  <img src="pictures/5/5_Hcanny_200.bmp?raw=True" width="25%" height="25%"/><img src="pictures/5/5_Hcanny_300.bmp?raw=True" width="25%" height="25%"/>
</div>
<div align="center">  canny法，左图Threshold=200, 右图Threshold=300</div>
<br>综上所述，可以得出结论：从sobel算子到laplace算子再到canny法，经过Hough变换后检测出的直线数量会减少；当提高Hough变换的阈值时，检测到的直线数量也会减少。</br>